{"mappings":"6kBAUA,IAAIA,EAAW,IAAIC,EAAAC,GAAJ,CAAmB,gBAAiB,CACjDC,aAAc,MACdC,aAAc,IACdC,SAAU,SAGRC,EAAc,GACdC,EAAO,EACPC,EAAa,GAEjB,EAAAC,EAAAC,WAAcC,KAAKC,QAAQC,KAC3B,MAAMC,EAAO,CACXC,KAAMC,SAASC,cAAc,gBAC7BC,YAAaF,SAASC,cAAc,cACpCE,QAASH,SAASC,cAAc,YAChCG,YAAaJ,SAASC,cAAc,mBAGtC,SAASI,EAAgBC,GACvB,MAAMC,EAASD,EAAIE,KAAIC,IAAQ,EAAAC,EAAAhB,SAAae,KAAOE,KAAK,IACxDb,EAAKK,QAAQS,mBAAmB,YAAaL,E,CAG/CT,EAAKC,KAAKc,iBAAiB,UAG3BC,eAA0BC,GAKxB,GAJAA,EAAEC,iBACFzB,EAAO,EACPD,EAAcyB,EAAEE,cAAcC,YAAYC,MAAMC,OAE5B,KAAhB9B,EAEF,YADA+B,EAAAC,OAAOC,KAAK,+BAIdzB,EAAKI,YAAYsB,UAAUC,IAAI,aAC/B3B,EAAKM,YAAYoB,UAAUC,IAAI,aAE/B,IACE,MAAMC,QAAiB,EAAAjC,EAAAC,SAAYJ,EAAaC,GAChDC,EAAakC,EAASC,KAAKC,OAEvBF,EAASG,UAAY,GACvB/B,EAAKI,YAAYsB,UAAUM,OAAO,aAElChC,EAAKI,YAAYsB,UAAUC,IAAI,aAG7BC,EAASG,UAAY,IACvBR,EAAAC,OAAOS,QAAQ,oBAAoBL,EAASG,qBAC5C/B,EAAKK,QAAQ6B,UAAY,GACzB3B,EAAgBqB,EAASC,MACzB3C,EAASiD,UACTnC,EAAKM,YAAYoB,UAAUC,IAAI,aA2CnCS,OAAOC,SAAS,CACdC,IAAK,EACLC,SAAU,YAxCiB,IAAvBX,EAASG,YACX/B,EAAKK,QAAQ6B,UAAY,GACzBhC,SAASC,cAAc,SAASkB,MAAQ,GAExCE,EAAAC,OAAOgB,QACL,4EAEFxC,EAAKI,YAAYsB,UAAUC,IAAI,aAC/B3B,EAAKM,YAAYoB,UAAUC,IAAI,a,CAEjC,MAAOc,GACPlB,EAAAC,OAAOgB,QAAQ,gCACftC,SAASC,cAAc,SAASkB,MAAQ,GACxCvB,QAAQC,IAAI0C,E,KAhDhBzC,EAAKI,YAAYW,iBAAiB,SAoDlCC,iBACEvB,GAAQ,EAER,IACE,MAAMmC,QAAiB,EAAAjC,EAAAC,SAAYJ,EAAaC,GAChDc,EAAgBqB,EAASC,MACzB3C,EAASiD,UACTzC,GAAckC,EAASC,KAAKC,OAExBpC,IAAekC,EAASG,YAC1B/B,EAAKI,YAAYsB,UAAUC,IAAI,aAC/B3B,EAAKM,YAAYoB,UAAUM,OAAO,cAgBxC,WACE,MAAQU,OAAQC,GAAezC,SAC5BC,cAAc,YACdyC,kBAAkBC,wBAErBT,OAAOC,SAAS,CACdC,IAAkB,EAAbK,EACLJ,SAAU,U,CArBVO,E,CACA,MAAOL,GACPlB,EAAAC,OAAOgB,QAAQ,gCACftC,SAASC,cAAc,SAASkB,MAAQ,E","sources":["src/withButton.js"],"sourcesContent":["import './css/styles.css';\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\nimport { Notify } from 'notiflix/build/notiflix-notify-aio';\nimport fetchImages from './js/fetchImg';\nimport cardTemplate from './js/templatas/card-template.hbs';\n// import throttle from 'lodash.throttle';\n\n// const THROTTLE_DELAY = 250;\n\nlet lightbox = new SimpleLightbox('.photo-card a', {\n  captionsData: 'alt',\n  captionDelay: 250,\n  captions: 'true',\n});\n\nlet searchQuery = '';\nlet page = 1;\nlet loadedHits = 0;\n\nfetchImages().then(console.log);\nconst refs = {\n  form: document.querySelector('.search-form'),\n  loadMoreBtn: document.querySelector('.load-more'),\n  gallery: document.querySelector('.gallery'),\n  galleryText: document.querySelector('.gallery__text'),\n};\n\nfunction renderCardImage(arr) {\n  const markup = arr.map(item => cardTemplate(item)).join('');\n  refs.gallery.insertAdjacentHTML('beforeend', markup);\n}\n\nrefs.form.addEventListener('submit', onFormData);\nrefs.loadMoreBtn.addEventListener('click', onLoadMoreBtn);\n\nasync function onFormData(e) {\n  e.preventDefault();\n  page = 1;\n  searchQuery = e.currentTarget.searchQuery.value.trim();\n  // console.log(searchQuery);\n  if (searchQuery === '') {\n    Notify.info('This field cannot be empty!');\n    return;\n  }\n\n  refs.loadMoreBtn.classList.add('is-hidden');\n  refs.galleryText.classList.add('is-hidden');\n\n  try {\n    const response = await fetchImages(searchQuery, page);\n    loadedHits = response.hits.length;\n\n    if (response.totalHits > 40) {\n      refs.loadMoreBtn.classList.remove('is-hidden');\n    } else {\n      refs.loadMoreBtn.classList.add('is-hidden');\n    }\n\n    if (response.totalHits > 0) {\n      Notify.success(`Hooray! We found ${response.totalHits} images.`);\n      refs.gallery.innerHTML = '';\n      renderCardImage(response.hits);\n      lightbox.refresh();\n      refs.galleryText.classList.add('is-hidden');\n\n      onScroll();\n    }\n\n    if (response.totalHits === 0) {\n      refs.gallery.innerHTML = '';\n      document.querySelector('input').value = '';\n\n      Notify.failure(\n        'Sorry, there are no images matching your search query. Please try again.'\n      );\n      refs.loadMoreBtn.classList.add('is-hidden');\n      refs.galleryText.classList.add('is-hidden');\n    }\n  } catch (error) {\n    Notify.failure('Ooops...Something goes wrong');\n    document.querySelector('input').value = '';\n    console.log(error);\n  }\n}\n\nasync function onLoadMoreBtn() {\n  page += 1;\n\n  try {\n    const response = await fetchImages(searchQuery, page);\n    renderCardImage(response.hits);\n    lightbox.refresh();\n    loadedHits += response.hits.length;\n\n    if (loadedHits === response.totalHits) {\n      refs.loadMoreBtn.classList.add('is-hidden');\n      refs.galleryText.classList.remove('is-hidden');\n    }\n    onScrollMore();\n  } catch (error) {\n    Notify.failure('Ooops...Something goes wrong');\n    document.querySelector('input').value = '';\n  }\n}\n\nfunction onScroll() {\n  window.scrollBy({\n    top: 0,\n    behavior: 'smooth',\n  });\n}\n\nfunction onScrollMore() {\n  const { height: cardHeight } = document\n    .querySelector('.gallery')\n    .firstElementChild.getBoundingClientRect();\n\n  window.scrollBy({\n    top: cardHeight * 3,\n    behavior: 'smooth',\n  });\n}\n"],"names":["$85ad82c3c3c239ef$var$lightbox","$parcel$interopDefault","$fZKcF","captionsData","captionDelay","captions","$85ad82c3c3c239ef$var$searchQuery","$85ad82c3c3c239ef$var$page","$85ad82c3c3c239ef$var$loadedHits","$dOcJw","default","then","console","log","$85ad82c3c3c239ef$var$refs","form","document","querySelector","loadMoreBtn","gallery","galleryText","$85ad82c3c3c239ef$var$renderCardImage","arr","markup","map","item","$atL0j","join","insertAdjacentHTML","addEventListener","async","e","preventDefault","currentTarget","searchQuery","value","trim","$iQIUW","Notify","info","classList","add","response","hits","length","totalHits","remove","success","innerHTML","refresh","window","scrollBy","top","behavior","failure","error","height","cardHeight","firstElementChild","getBoundingClientRect","$85ad82c3c3c239ef$var$onScrollMore"],"version":3,"file":"withButton.0948370f.js.map"}