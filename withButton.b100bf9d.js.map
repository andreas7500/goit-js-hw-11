{"mappings":"6kBAOA,IAAIA,EAAW,IAAIC,EAAAC,GAAJ,CAAmB,gBAAiB,CACjDC,aAAc,MACdC,aAAc,IACdC,SAAU,SAGRC,EAAc,GACdC,EAAO,EACPC,EAAa,EAEjB,MAAMC,EAAO,CACXC,KAAMC,SAASC,cAAc,gBAC7BC,YAAaF,SAASC,cAAc,cACpCE,QAASH,SAASC,cAAc,YAChCG,YAAaJ,SAASC,cAAc,kBAGtC,SAASI,EAAgBC,GACvB,MAAMC,EAASD,EAAIE,KAAIC,IAAQ,EAAAC,EAAAC,SAAaF,KAAOG,KAAK,IACxDd,EAAKK,QAAQU,mBAAmB,YAAaN,E,CAG/CT,EAAKC,KAAKe,iBAAiB,UAG3BC,eAA0BC,GAOxB,GANAA,EAAEC,iBAEFtB,EAAcqB,EAAEE,cAAcC,YAAYC,MAAMC,OAChDzB,EAAO,EACPE,EAAKK,QAAQmB,UAAY,GAEL,KAAhB3B,EAEF,YADA4B,EAAAC,OAAOC,KAAK,+BAId3B,EAAKI,YAAYwB,UAAUC,IAAI,aAC/B7B,EAAKM,YAAYsB,UAAUC,IAAI,aAE/B,IACE,MAAMC,QAAiB,EAAAC,EAAAlB,SAAYhB,EAAaC,GAChDC,EAAa+B,EAASE,KAAKC,OAEvBH,EAASI,UAAY,GACvBlC,EAAKI,YAAYwB,UAAUO,OAAO,aAElCnC,EAAKI,YAAYwB,UAAUC,IAAI,aAG7BC,EAASI,UAAY,IACvBT,EAAAC,OAAOU,QAAQ,oBAAoBN,EAASI,qBAC5ClC,EAAKK,QAAQmB,UAAY,GACzBjB,EAAgBuB,EAASE,MACzBzC,EAAS8C,UACTrC,EAAKM,YAAYsB,UAAUC,IAAI,aA4CnCS,OAAOC,SAAS,CACdC,IAAK,EACLC,SAAU,YAzCiB,IAAvBX,EAASI,YACXlC,EAAKK,QAAQmB,UAAY,GACzBtB,SAASC,cAAc,SAASmB,MAAQ,GAExCG,EAAAC,OAAOgB,QACL,4EAEF1C,EAAKI,YAAYwB,UAAUC,IAAI,aAC/B7B,EAAKM,YAAYsB,UAAUC,IAAI,a,CAEjC,MAAOc,GACPlB,EAAAC,OAAOgB,QAAQ,gCAEf7C,EAAY+C,QACZC,QAAQC,IAAIH,E,KAnDhB3C,EAAKI,YAAYY,iBAAiB,SAuDlCC,iBACEnB,GAAQ,EAER,IACE,MAAMgC,QAAiB,EAAAC,EAAAlB,SAAYhB,EAAaC,GAChDS,EAAgBuB,EAASE,MACzBzC,EAAS8C,UACTtC,GAAc+B,EAASE,KAAKC,OAExBlC,IAAe+B,EAASI,YAC1BlC,EAAKI,YAAYwB,UAAUC,IAAI,aAC/B7B,EAAKM,YAAYsB,UAAUO,OAAO,cAgBxC,WACE,MAAQY,OAAQC,GAAe9C,SAC5BC,cAAc,YACd8C,kBAAkBC,wBAErBZ,OAAOC,SAAS,CACdC,IAAkB,EAAbQ,EACLP,SAAU,U,CArBVU,E,CACA,MAAOR,GACPlB,EAAAC,OAAOgB,QAAQ,gCACfxC,SAASC,cAAc,SAASmB,MAAQ,E","sources":["src/withButton.js"],"sourcesContent":["import './css/styles.css';\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\nimport { Notify } from 'notiflix/build/notiflix-notify-aio';\nimport fetchImages from './js/fetchImg';\nimport cardTemplate from './js/templatas/card-template.hbs';\n\nlet lightbox = new SimpleLightbox('.photo-card a', {\n  captionsData: 'alt',\n  captionDelay: 250,\n  captions: 'true',\n});\n\nlet searchQuery = '';\nlet page = 1;\nlet loadedHits = 0;\n\nconst refs = {\n  form: document.querySelector('.search-form'),\n  loadMoreBtn: document.querySelector('.load-more'),\n  gallery: document.querySelector('.gallery'),\n  galleryText: document.querySelector('.gallery-text'),\n};\n\nfunction renderCardImage(arr) {\n  const markup = arr.map(item => cardTemplate(item)).join('');\n  refs.gallery.insertAdjacentHTML('beforeend', markup);\n}\n\nrefs.form.addEventListener('submit', onFormData);\nrefs.loadMoreBtn.addEventListener('click', onLoadMoreBtn);\n\nasync function onFormData(e) {\n  e.preventDefault();\n\n  searchQuery = e.currentTarget.searchQuery.value.trim();\n  page = 1;\n  refs.gallery.innerHTML = '';\n\n  if (searchQuery === '') {\n    Notify.info('This field cannot be empty!');\n    return;\n  }\n\n  refs.loadMoreBtn.classList.add('is-hidden');\n  refs.galleryText.classList.add('is-hidden');\n\n  try {\n    const response = await fetchImages(searchQuery, page);\n    loadedHits = response.hits.length;\n\n    if (response.totalHits > 40) {\n      refs.loadMoreBtn.classList.remove('is-hidden');\n    } else {\n      refs.loadMoreBtn.classList.add('is-hidden');\n    }\n\n    if (response.totalHits > 0) {\n      Notify.success(`Hooray! We found ${response.totalHits} images.`);\n      refs.gallery.innerHTML = '';\n      renderCardImage(response.hits);\n      lightbox.refresh();\n      refs.galleryText.classList.add('is-hidden');\n\n      onScroll();\n    }\n\n    if (response.totalHits === 0) {\n      refs.gallery.innerHTML = '';\n      document.querySelector('input').value = '';\n\n      Notify.failure(\n        'Sorry, there are no images matching your search query. Please try again.'\n      );\n      refs.loadMoreBtn.classList.add('is-hidden');\n      refs.galleryText.classList.add('is-hidden');\n    }\n  } catch (error) {\n    Notify.failure('Ooops...Something goes wrong');\n\n    searchQuery.reset();\n    console.log(error);\n  }\n}\n\nasync function onLoadMoreBtn() {\n  page += 1;\n\n  try {\n    const response = await fetchImages(searchQuery, page);\n    renderCardImage(response.hits);\n    lightbox.refresh();\n    loadedHits += response.hits.length;\n\n    if (loadedHits === response.totalHits) {\n      refs.loadMoreBtn.classList.add('is-hidden');\n      refs.galleryText.classList.remove('is-hidden');\n    }\n    onScrollMore();\n  } catch (error) {\n    Notify.failure('Ooops...Something goes wrong');\n    document.querySelector('input').value = '';\n  }\n}\n\nfunction onScroll() {\n  window.scrollBy({\n    top: 0,\n    behavior: 'smooth',\n  });\n}\n\nfunction onScrollMore() {\n  const { height: cardHeight } = document\n    .querySelector('.gallery')\n    .firstElementChild.getBoundingClientRect();\n\n  window.scrollBy({\n    top: cardHeight * 3,\n    behavior: 'smooth',\n  });\n}\n"],"names":["$85ad82c3c3c239ef$var$lightbox","$parcel$interopDefault","$fZKcF","captionsData","captionDelay","captions","$85ad82c3c3c239ef$var$searchQuery","$85ad82c3c3c239ef$var$page","$85ad82c3c3c239ef$var$loadedHits","$85ad82c3c3c239ef$var$refs","form","document","querySelector","loadMoreBtn","gallery","galleryText","$85ad82c3c3c239ef$var$renderCardImage","arr","markup","map","item","$atL0j","default","join","insertAdjacentHTML","addEventListener","async","e","preventDefault","currentTarget","searchQuery","value","trim","innerHTML","$iQIUW","Notify","info","classList","add","response","$dOcJw","hits","length","totalHits","remove","success","refresh","window","scrollBy","top","behavior","failure","error","reset","console","log","height","cardHeight","firstElementChild","getBoundingClientRect","$85ad82c3c3c239ef$var$onScrollMore"],"version":3,"file":"withButton.b100bf9d.js.map"}